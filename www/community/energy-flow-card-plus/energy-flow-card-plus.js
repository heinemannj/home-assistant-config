function t(t,i,e,o){var n,r=arguments.length,s=r<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,i,e,o);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(r<3?n(s):r>3?n(i,e,s):n(i,e))||s);return r>3&&s&&Object.defineProperty(i,e,s),s}const i=window,e=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),n=new WeakMap;class r{constructor(t,i,e){if(this._$cssResult$=!0,e!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=i}get styleSheet(){let t=this.o;const i=this.t;if(e&&void 0===t){const e=void 0!==i&&1===i.length;e&&(t=n.get(i)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&n.set(i,t))}return t}toString(){return this.cssText}}const s=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let i="";for(const e of t.cssRules)i+=e.cssText;return(t=>new r("string"==typeof t?t:t+"",void 0,o))(i)})(t):t;var l;const a=window,d=a.trustedTypes,c=d?d.emptyScript:"",v=a.reactiveElementPolyfillSupport,u={toAttribute(t,i){switch(i){case Boolean:t=t?c:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let e=t;switch(i){case Boolean:e=null!==t;break;case Number:e=null===t?null:Number(t);break;case Object:case Array:try{e=JSON.parse(t)}catch(t){e=null}}return e}},h=(t,i)=>i!==t&&(i==i||t==t),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:h};class p extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var i;this.finalize(),(null!==(i=this.h)&&void 0!==i?i:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,e)=>{const o=this._$Ep(e,i);void 0!==o&&(this._$Ev.set(o,e),t.push(o))})),t}static createProperty(t,i=y){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const e="symbol"==typeof t?Symbol():"__"+t,o=this.getPropertyDescriptor(t,e,i);void 0!==o&&Object.defineProperty(this.prototype,t,o)}}static getPropertyDescriptor(t,i,e){return{get(){return this[i]},set(o){const n=this[t];this[i]=o,this.requestUpdate(t,n,e)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||y}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const e of i)this.createProperty(e,t[e])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const i=[];if(Array.isArray(t)){const e=new Set(t.flat(1/0).reverse());for(const t of e)i.unshift(s(t))}else void 0!==t&&i.push(s(t));return i}static _$Ep(t,i){const e=i.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,e;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(e=t.hostConnected)||void 0===e||e.call(t))}removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Ei.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const o=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,o)=>{e?t.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):o.forEach((e=>{const o=document.createElement("style"),n=i.litNonce;void 0!==n&&o.setAttribute("nonce",n),o.textContent=e.cssText,t.appendChild(o)}))})(o,this.constructor.elementStyles),o}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,e){this._$AK(t,e)}_$EO(t,i,e=y){var o;const n=this.constructor._$Ep(t,e);if(void 0!==n&&!0===e.reflect){const r=(void 0!==(null===(o=e.converter)||void 0===o?void 0:o.toAttribute)?e.converter:u).toAttribute(i,e.type);this._$El=t,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$El=null}}_$AK(t,i){var e;const o=this.constructor,n=o._$Ev.get(t);if(void 0!==n&&this._$El!==n){const t=o.getPropertyOptions(n),r="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(e=t.converter)||void 0===e?void 0:e.fromAttribute)?t.converter:u;this._$El=n,this[n]=r.fromAttribute(i,t.type),this._$El=null}}requestUpdate(t,i,e){let o=!0;void 0!==t&&(((e=e||this.constructor.getPropertyOptions(t)).hasChanged||h)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===e.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,e))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,i)=>this[i]=t)),this._$Ei=void 0);let i=!1;const e=this._$AL;try{i=this.shouldUpdate(e),i?(this.willUpdate(e),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(e)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(e)}willUpdate(t){}_$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$EO(i,this[i],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var g;p.finalized=!0,p.elementProperties=new Map,p.elementStyles=[],p.shadowRootOptions={mode:"open"},null==v||v({ReactiveElement:p}),(null!==(l=a.reactiveElementVersions)&&void 0!==l?l:a.reactiveElementVersions=[]).push("1.6.1");const f=window,_=f.trustedTypes,m=_?_.createPolicy("lit-html",{createHTML:t=>t}):void 0,b="$lit$",$=`lit$${(Math.random()+"").slice(9)}$`,w="?"+$,x=`<${w}>`,k=document,E=()=>k.createComment(""),S=t=>null===t||"object"!=typeof t&&"function"!=typeof t,A=Array.isArray,M="[ \t\n\f\r]",P=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,D=/-->/g,C=/>/g,O=RegExp(`>|${M}(?:([^\\s"'>=/]+)(${M}*=${M}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),N=/'/g,j=/"/g,T=/^(?:script|style|textarea|title)$/i,z=t=>(i,...e)=>({_$litType$:t,strings:i,values:e}),R=z(1),H=z(2),U=Symbol.for("lit-noChange"),I=Symbol.for("lit-nothing"),F=new WeakMap,V=k.createTreeWalker(k,129,null,!1),L=(t,i)=>{const e=t.length-1,o=[];let n,r=2===i?"<svg>":"",s=P;for(let i=0;i<e;i++){const e=t[i];let l,a,d=-1,c=0;for(;c<e.length&&(s.lastIndex=c,a=s.exec(e),null!==a);)c=s.lastIndex,s===P?"!--"===a[1]?s=D:void 0!==a[1]?s=C:void 0!==a[2]?(T.test(a[2])&&(n=RegExp("</"+a[2],"g")),s=O):void 0!==a[3]&&(s=O):s===O?">"===a[0]?(s=null!=n?n:P,d=-1):void 0===a[1]?d=-2:(d=s.lastIndex-a[2].length,l=a[1],s=void 0===a[3]?O:'"'===a[3]?j:N):s===j||s===N?s=O:s===D||s===C?s=P:(s=O,n=void 0);const v=s===O&&t[i+1].startsWith("/>")?" ":"";r+=s===P?e+x:d>=0?(o.push(l),e.slice(0,d)+b+e.slice(d)+$+v):e+$+(-2===d?(o.push(void 0),i):v)}const l=r+(t[e]||"<?>")+(2===i?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==m?m.createHTML(l):l,o]};class W{constructor({strings:t,_$litType$:i},e){let o;this.parts=[];let n=0,r=0;const s=t.length-1,l=this.parts,[a,d]=L(t,i);if(this.el=W.createElement(a,e),V.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(o=V.nextNode())&&l.length<s;){if(1===o.nodeType){if(o.hasAttributes()){const t=[];for(const i of o.getAttributeNames())if(i.endsWith(b)||i.startsWith($)){const e=d[r++];if(t.push(i),void 0!==e){const t=o.getAttribute(e.toLowerCase()+b).split($),i=/([.?@])?(.*)/.exec(e);l.push({type:1,index:n,name:i[2],strings:t,ctor:"."===i[1]?K:"?"===i[1]?Z:"@"===i[1]?Q:q})}else l.push({type:6,index:n})}for(const i of t)o.removeAttribute(i)}if(T.test(o.tagName)){const t=o.textContent.split($),i=t.length-1;if(i>0){o.textContent=_?_.emptyScript:"";for(let e=0;e<i;e++)o.append(t[e],E()),V.nextNode(),l.push({type:2,index:++n});o.append(t[i],E())}}}else if(8===o.nodeType)if(o.data===w)l.push({type:2,index:n});else{let t=-1;for(;-1!==(t=o.data.indexOf($,t+1));)l.push({type:7,index:n}),t+=$.length-1}n++}}static createElement(t,i){const e=k.createElement("template");return e.innerHTML=t,e}}function B(t,i,e=t,o){var n,r,s,l;if(i===U)return i;let a=void 0!==o?null===(n=e._$Co)||void 0===n?void 0:n[o]:e._$Cl;const d=S(i)?void 0:i._$litDirective$;return(null==a?void 0:a.constructor)!==d&&(null===(r=null==a?void 0:a._$AO)||void 0===r||r.call(a,!1),void 0===d?a=void 0:(a=new d(t),a._$AT(t,e,o)),void 0!==o?(null!==(s=(l=e)._$Co)&&void 0!==s?s:l._$Co=[])[o]=a:e._$Cl=a),void 0!==a&&(i=B(t,a._$AS(t,i.values),a,o)),i}class Y{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var i;const{el:{content:e},parts:o}=this._$AD,n=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:k).importNode(e,!0);V.currentNode=n;let r=V.nextNode(),s=0,l=0,a=o[0];for(;void 0!==a;){if(s===a.index){let i;2===a.type?i=new G(r,r.nextSibling,this,t):1===a.type?i=new a.ctor(r,a.name,a.strings,this,t):6===a.type&&(i=new X(r,this,t)),this._$AV.push(i),a=o[++l]}s!==(null==a?void 0:a.index)&&(r=V.nextNode(),s++)}return n}v(t){let i=0;for(const e of this._$AV)void 0!==e&&(void 0!==e.strings?(e._$AI(t,e,i),i+=e.strings.length-2):e._$AI(t[i])),i++}}class G{constructor(t,i,e,o){var n;this.type=2,this._$AH=I,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=e,this.options=o,this._$Cp=null===(n=null==o?void 0:o.isConnected)||void 0===n||n}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===(null==t?void 0:t.nodeType)&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=B(this,t,i),S(t)?t===I||null==t||""===t?(this._$AH!==I&&this._$AR(),this._$AH=I):t!==this._$AH&&t!==U&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>A(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==I&&S(this._$AH)?this._$AA.nextSibling.data=t:this.$(k.createTextNode(t)),this._$AH=t}g(t){var i;const{values:e,_$litType$:o}=t,n="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=W.createElement(o.h,this.options)),o);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===n)this._$AH.v(e);else{const t=new Y(n,this),i=t.u(this.options);t.v(e),this.$(i),this._$AH=t}}_$AC(t){let i=F.get(t.strings);return void 0===i&&F.set(t.strings,i=new W(t)),i}T(t){A(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let e,o=0;for(const n of t)o===i.length?i.push(e=new G(this.k(E()),this.k(E()),this,this.options)):e=i[o],e._$AI(n),o++;o<i.length&&(this._$AR(e&&e._$AB.nextSibling,o),i.length=o)}_$AR(t=this._$AA.nextSibling,i){var e;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cp=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class q{constructor(t,i,e,o,n){this.type=1,this._$AH=I,this._$AN=void 0,this.element=t,this.name=i,this._$AM=o,this.options=n,e.length>2||""!==e[0]||""!==e[1]?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=I}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,e,o){const n=this.strings;let r=!1;if(void 0===n)t=B(this,t,i,0),r=!S(t)||t!==this._$AH&&t!==U,r&&(this._$AH=t);else{const o=t;let s,l;for(t=n[0],s=0;s<n.length-1;s++)l=B(this,o[e+s],i,s),l===U&&(l=this._$AH[s]),r||(r=!S(l)||l!==this._$AH[s]),l===I?t=I:t!==I&&(t+=(null!=l?l:"")+n[s+1]),this._$AH[s]=l}r&&!o&&this.j(t)}j(t){t===I?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class K extends q{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===I?void 0:t}}const J=_?_.emptyScript:"";class Z extends q{constructor(){super(...arguments),this.type=4}j(t){t&&t!==I?this.element.setAttribute(this.name,J):this.element.removeAttribute(this.name)}}class Q extends q{constructor(t,i,e,o,n){super(t,i,e,o,n),this.type=5}_$AI(t,i=this){var e;if((t=null!==(e=B(this,t,i,0))&&void 0!==e?e:I)===U)return;const o=this._$AH,n=t===I&&o!==I||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,r=t!==I&&(o===I||n);n&&this.element.removeEventListener(this.name,this,o),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,e;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==e?e:this.element,t):this._$AH.handleEvent(t)}}class X{constructor(t,i,e){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(t){B(this,t)}}const tt=f.litHtmlPolyfillSupport;null==tt||tt(W,G),(null!==(g=f.litHtmlVersions)&&void 0!==g?g:f.litHtmlVersions=[]).push("2.7.3");var it,et;class ot extends p{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,i;const e=super.createRenderRoot();return null!==(t=(i=this.renderOptions).renderBefore)&&void 0!==t||(i.renderBefore=e.firstChild),e}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,i,e)=>{var o,n;const r=null!==(o=null==e?void 0:e.renderBefore)&&void 0!==o?o:i;let s=r._$litPart$;if(void 0===s){const t=null!==(n=null==e?void 0:e.renderBefore)&&void 0!==n?n:null;r._$litPart$=s=new G(i.insertBefore(E(),t),t,void 0,null!=e?e:{})}return s._$AI(t),s})(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return U}}ot.finalized=!0,ot._$litElement$=!0,null===(it=globalThis.litElementHydrateSupport)||void 0===it||it.call(globalThis,{LitElement:ot});const nt=globalThis.litElementPolyfillSupport;null==nt||nt({LitElement:ot}),(null!==(et=globalThis.litElementVersions)&&void 0!==et?et:globalThis.litElementVersions=[]).push("3.3.2");const rt=(t,i)=>"method"===i.kind&&i.descriptor&&!("value"in i.descriptor)?{...i,finisher(e){e.createProperty(i.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:i.key,initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(e){e.createProperty(i.key,t)}};function st(t){return(i,e)=>void 0!==e?((t,i,e)=>{i.constructor.createProperty(e,t)})(t,i,e):rt(t,i)}function lt(t){return st({...t,state:!0})}var at;null===(at=window.HTMLSlotElement)||void 0===at||at.prototype.assignedElements;var dt={version:"Version",invalid_configuration:"Invalid configuration",show_warning:"Show Warning",entity_not_found:"Entity state not found",missing_child:"Missing child entity",loading:"Loading..."},ct={yaml_disclaimer:"Please use yaml mode for the other options",docs:"Documentation",sections:"Sections",section:"Section",add_section:"+ Add section",add_entity:"+ Add entity",entity_editor:"Entity editor",decimals:"decimals",fields:{autoconfig:"Autoconfig",print_yaml:"Print auto generated config yaml",show_names:"Show names",show_icons:"Show icons",show_states:"Show states",show_units:"Show units",energy_date_selection:"Sync with energy_date_selection component",height:"Height",wide:"Wide",min_box_height:"Min box height",min_box_distance:"Min box distance",min_state:"Min state",round:"Round",throttle:"Throttle",unit_prefix:"Unit prefix",entity:"Entity",type:"Type",children:"Children",name:"Name",icon:"Icon",color:"Color",unit_of_measurement:"Unit of measurement",tap_action:"Tap action",color_on_state:"Change color based on state",color_limit:"State limit for color change",color_above:"Color above limit",color_below:"Color below limit"},entity_types:{entity:"Entity",remaining_parent_state:"Remaining parent state",remaining_child_state:"Remaining child state",passthrough:"Passthrough"}},vt={common:dt,editor:ct};const ut={en:Object.freeze({__proto__:null,common:dt,editor:ct,default:vt})};var ht,yt;function pt(){return(pt=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}).apply(this,arguments)}!function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(ht||(ht={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(yt||(yt={}));var gt=function(t,i){return void 0===i&&(i=2),Math.round(t*Math.pow(10,i))/Math.pow(10,i)},ft=function(t,i,e){var o=i?function(t){switch(t.number_format){case ht.comma_decimal:return["en-US","en"];case ht.decimal_comma:return["de","es","it"];case ht.space_comma:return["fr","sv","cs"];case ht.system:return;default:return t.language}}(i):void 0;if(Number.isNaN=Number.isNaN||function t(i){return"number"==typeof i&&t(i)},(null==i?void 0:i.number_format)!==ht.none&&!Number.isNaN(Number(t))&&Intl)try{return new Intl.NumberFormat(o,_t(t,e)).format(Number(t))}catch(i){return console.error(i),new Intl.NumberFormat(void 0,_t(t,e)).format(Number(t))}return"string"==typeof t?t:gt(t,null==e?void 0:e.maximumFractionDigits).toString()+("currency"===(null==e?void 0:e.style)?" "+e.currency:"")},_t=function(t,i){var e=pt({maximumFractionDigits:2},i);if("string"!=typeof t)return e;if(!i||!i.minimumFractionDigits&&!i.maximumFractionDigits){var o=t.indexOf(".")>-1?t.split(".")[1].length:0;e.minimumFractionDigits=o,e.maximumFractionDigits=o}return e};function mt(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function bt(t,i=0){return mt(t)?Number(t):i}function $t(t,i=/\s+/){const e=[];if(null!=t){const o=Array.isArray(t)?t:`${t}`.split(i);for(const t of o){const i=`${t}`.trim();i&&e.push(i)}}return e}const wt=i=>{class e extends i{connectedCallback(){super.connectedCallback(),this.__checkSubscribed()}disconnectedCallback(){super.disconnectedCallback(),this.hassUnsubscribe()}updated(t){super.updated(t),t.has("hass")&&this.__checkSubscribed()}resetSubscriptions(){this.hassUnsubscribe(),this.__checkSubscribed()}hassSubscribe(){return[]}hassUnsubscribe(){if(this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}__checkSubscribed(){void 0===this.__unsubs&&this.isConnected&&void 0!==this.hass&&(this.__unsubs=this.hassSubscribe())}}return t([st({attribute:!1})],e.prototype,"hass",void 0),e};function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function kt(t){if(null===t||!0===t||!1===t)return NaN;var i=Number(t);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}function Et(t,i){if(i.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+i.length+" present")}function St(t){Et(1,arguments);var i=Object.prototype.toString.call(t);return t instanceof Date||"object"===xt(t)&&"[object Date]"===i?new Date(t.getTime()):"number"==typeof t||"[object Number]"===i?new Date(t):("string"!=typeof t&&"[object String]"!==i||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var At=36e5;function Mt(t,i){return Et(2,arguments),function(t,i){Et(2,arguments);var e=St(t).getTime(),o=kt(i);return new Date(e+o)}(t,kt(i)*At)}function Pt(t){var i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),t.getTime()-i.getTime()}function Dt(t){Et(1,arguments);var i=St(t);return i.setHours(0,0,0,0),i}var Ct=864e5;function Ot(t,i){var e=t.getFullYear()-i.getFullYear()||t.getMonth()-i.getMonth()||t.getDate()-i.getDate()||t.getHours()-i.getHours()||t.getMinutes()-i.getMinutes()||t.getSeconds()-i.getSeconds()||t.getMilliseconds()-i.getMilliseconds();return e<0?-1:e>0?1:e}function Nt(t,i){Et(2,arguments);var e=St(t),o=St(i),n=Ot(e,o),r=Math.abs(function(t,i){Et(2,arguments);var e=Dt(t),o=Dt(i),n=e.getTime()-Pt(e),r=o.getTime()-Pt(o);return Math.round((n-r)/Ct)}(e,o));e.setDate(e.getDate()-n*r);var s=n*(r-Number(Ot(e,o)===-n));return 0===s?0:s}const jt=(t,i="_energy")=>t.connection[i]?t.connection[i]:null,Tt=t=>{if(!t||t.length<2)return null;const i=t[t.length-1].sum;if(null===i)return null;const e=t[0].sum;return null===e?i:i-e};const zt=1;class Rt{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,i,e){this._$Ct=t,this._$AM=i,this._$Ci=e}_$AS(t,i){return this.update(t,i)}update(t,i){return this.render(...i)}}const Ht=(t=>(...i)=>({_$litDirective$:t,values:i}))(class extends Rt{constructor(t){var i;if(super(t),t.type!==zt||"class"!==t.name||(null===(i=t.strings)||void 0===i?void 0:i.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((i=>t[i])).join(" ")+" "}update(t,[i]){var e,o;if(void 0===this.it){this.it=new Set,void 0!==t.strings&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in i)i[t]&&!(null===(e=this.nt)||void 0===e?void 0:e.has(t))&&this.it.add(t);return this.render(i)}const n=t.element.classList;this.it.forEach((t=>{t in i||(n.remove(t),this.it.delete(t))}));for(const t in i){const e=!!i[t];e===this.it.has(t)||(null===(o=this.nt)||void 0===o?void 0:o.has(t))||(e?(n.add(t),this.it.add(t)):(n.remove(t),this.it.delete(t)))}return U}});var Ut="0.0.1";console.groupCollapsed(`%c⚡ Energy Flow Card Plus v${Ut} is installed`,"color: #488fc2; font-weight: bold"),console.log("Readme:","https://github.com/flixlix/energy-flow-card-plus"),console.groupEnd();const It=function(t,i,e){var o;return void 0===e&&(e=!1),function(){var n=[].slice.call(arguments),r=this,s=e&&!o;clearTimeout(o),o=setTimeout((function(){o=null,e||t.apply(r,n)}),i),s&&t.apply(r,n)}}((t=>{console.log(`%c⚡ Energy Flow Card Plus v${Ut} %cError: ${t}`,"color: #488fc2; font-weight: bold","color: #b33a3a; font-weight: normal")}),6e4),Ft=((t,...i)=>{const e=1===t.length?t[0]:i.reduce(((i,e,o)=>i+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(e)+t[o+1]),t[0]);return new r(e,t,o)})`:host{--mdc-icon-size:24px;--clickable-cursor:pointer;--individualone-color:#d0cc5b;--individualtwo-color:#964cb5;--non-fossil-color:var(--energy-non-fossil-color, #0f9d58);--icon-non-fossil-color:var(--non-fossil-color, #0f9d58);--icon-solar-color:var(--energy-solar-color, #ff9800);--icon-individualone-color:var(--individualone-color, #d0cc5b);--icon-individualtwo-color:var(--individualtwo-color, #964cb5);--icon-grid-color:var(--energy-grid-consumption-color, #488fc2);--icon-battery-color:var(--energy-battery-in-color, #f06292);--icon-home-color:var(--energy-grid-consumption-color, #488fc2);--text-solar-color:var(--primary-text-color);--text-non-fossil-color:var(--primary-text-color);--text-individualone-color:var(--primary-text-color);--text-individualtwo-color:var(--primary-text-color);--text-home-color:var(--primary-text-color);--secondary-text-individualone-color:var(--primary-text-color);--secondary-text-individualtwo-color:var(--primary-text-color);--text-battery-state-of-charge-color:var(--primary-text-color);--cirlce-grid-color:var(--energy-grid-consumption-color, #488fc2);--circle-battery-color:var(--energy-battery-in-color, #f06292);--secondary-text-solar-color:var(--primary-text-color);--secondary-text-grid-color:var(--primary-text-color);--secondary-text-home-color:var(--primary-text-color);--secondary-text-non-fossil-color:var(--primary-text-color)}.card-content{position:relative}.lines{position:absolute;bottom:0;left:0;width:100%;height:146px;display:flex;justify-content:center;padding:0 16px 16px;box-sizing:border-box}.lines.individual1-individual2{bottom:110px}.lines.high{bottom:100px;height:156px}.lines svg{width:calc(100% - 150px);height:100%;max-width:340px}// Correct curved lines not connecting to circles (https://github.com/flixlix/power-flow-card-plus/issues/125) .lines svg.flat-line{width:calc(100% - 160px)}.lines svg:not(.flat-line){height:calc(100% + 10px);position:relative;top:-5px}.row{display:flex;justify-content:space-between;max-width:500px;margin:0 auto}.circle-container{display:flex;flex-direction:column;align-items:center;z-index:2}.circle-container.solar{margin:0 4px;height:130px}.circle-container.individual2{margin-left:4px;height:130px}.circle-container.individual1{margin-left:4px;height:130px}.circle-container.individual1.bottom{position:relative;top:-20px;margin-bottom:-20px}.circle-container.battery{height:110px;justify-content:flex-end}.spacer{width:84px}.circle{width:80px;height:80px;border-radius:50%;box-sizing:border-box;border:2px solid;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-size:12px;line-height:12px;position:relative;text-decoration:none;color:var(--primary-text-color);background-color:var(--card-background-color)}.circle-container .circle{cursor:var(--clickable-cursor)}#battery-grid{stroke:var(--energy-grid-return-color)}ha-icon{padding-bottom:2px}ha-icon.small{--mdc-icon-size:12px}.label{color:var(--secondary-text-color);font-size:12px;max-width:80px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}line,path{stroke:var(--disabled-text-color);stroke-width:1;fill:none}.circle svg{position:absolute;fill:none;stroke-width:4px;width:100%;height:100%;top:0;left:0}span.secondary-info{color:var(--primary-text-color);font-size:12px;max-width:60px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.individual2 circle,.individual2 path{stroke:var(--individualtwo-color)}#individual1-icon{color:var(--icon-individualone-color)}#individual2-icon{color:var(--icon-individualtwo-color)}#solar-icon{color:var(--icon-solar-color)}circle.individual2{stroke-width:4;fill:var(--individualtwo-color)}.individual2 .circle{border-color:var(--individualtwo-color)}.individual1 circle,.individual1 path{stroke:var(--individualone-color)}circle.individual1{stroke-width:4;fill:var(--individualone-color)}.individual1 .circle{border-color:var(--individualone-color)}.circle-container.low-carbon{margin-right:4px;height:130px}.low-carbon path{stroke:var(--non-fossil-color)}.low-carbon .circle{border-color:var(--non-fossil-color)}.low-carbon ha-icon:not(.small){color:var(--icon-non-fossil-color)}circle.low-carbon{stroke-width:4;fill:var(--non-fossil-color);stroke:var(--non-fossil-color)}.solar{color:var(--primary-text-color)}.solar .circle{border-color:var(--energy-solar-color)}.solar ha-icon:not(.small){color:var(--icon-solar-color)}circle.solar,path.solar{stroke:var(--energy-solar-color)}circle.solar{stroke-width:4;fill:var(--energy-solar-color)}.battery .circle{border-color:var(--circle-battery-color)}circle.battery,path.battery{stroke:var(--energy-battery-out-color)}circle.battery-home,path.battery-home{stroke:var(--energy-battery-out-color)}circle.battery-home{stroke-width:4;fill:var(--energy-battery-out-color)}circle.battery-solar,path.battery-solar{stroke:var(--energy-battery-in-color)}circle.battery-solar{stroke-width:4;fill:var(--energy-battery-in-color)}.battery-in{color:var(--energy-battery-in-color)}.battery-out{color:var(--energy-battery-out-color)}path.battery-from-grid{stroke:var(--energy-grid-consumption-color)}path.battery-to-grid{stroke:var(--energy-grid-return-color)}.battery ha-icon:not(.small){color:var(--icon-battery-color)}circle.battery-to-grid,circle.return,path.return{stroke:var(--energy-grid-return-color)}circle.battery-to-grid,circle.return{stroke-width:4;fill:var(--energy-grid-return-color)}.return{color:var(--energy-grid-return-color)}.grid .circle{border-color:var(--circle-grid-color)}.consumption{color:var(--energy-grid-consumption-color)}circle.battery-from-grid,circle.grid,path.grid{stroke:var(--energy-grid-consumption-color)}circle.battery-from-grid,circle.grid{stroke-width:4;fill:var(--energy-grid-consumption-color)}.grid ha-icon:not(.small){color:var(--icon-grid-color)}.home .circle{border-width:0;border-color:var(--primary-color)}.home .circle.border{border-width:2px}.home ha-icon:not(.small){color:var(--icon-home-color)}.circle svg circle{animation:rotate-in .6s ease-in;transition:stroke-dashoffset .4s,stroke-dasharray .4s;fill:none}span.solar{color:var(--text-solar-color)}span.low-carbon{color:var(--text-non-fossil-color)}span.low-carbon.secondary-info{color:var(--secondary-text-non-fossil-color)}#home-circle{color:var(--text-home-color)}.individual1 .circle{color:var(--text-individualone-color)}.individual2 .circle{color:var(--text-individualtwo-color)}.individual1 span.secondary-info{color:var(--secondary-text-individualone-color)}.individual2 span.secondary-info{color:var(--secondary-text-individualtwo-color)}.solar span.secondary-info{color:var(--secondary-text-solar-color)}.grid span.secondary-info{color:var(--secondary-text-grid-color)}.home span.secondary-info{color:var(--secondary-text-home-color)}#battery-state-of-charge-text{color:var(--text-battery-state-of-charge-color)}@keyframes rotate-in{from{stroke-dashoffset:238.76104;stroke-dasharray:238.76104}}.card-actions a{text-decoration:none}`,Vt=6,Lt=1,Wt=0,Bt=1,Yt=10,Gt=2e3,qt=1e3;!function(t){const i=window;i.customCards=i.customCards||[],i.customCards.push(Object.assign(Object.assign({},t),{preview:!0,documentationURL:"https://github.com/flixlix/energy-flow-card-plus"}))}({type:"energy-flow-card-plus",name:"Energy Flow Card Plus",description:"A custom card for displaying energy flow in Home Assistant. Inspired by the official Energy Distribution Card."});const Kt=238.76104;let Jt=class extends(wt(ot)){constructor(){super(...arguments),this.states={},this.entitiesArr=[],this.unavailableOrMisconfiguredError=t=>It(`Entity "${null!=t?t:"Unknown"}" is not available or misconfigured`),this.entityExists=t=>t in this.hass.states,this.entityAvailable=t=>{var i;return mt(null===(i=this.hass.states[t])||void 0===i?void 0:i.state)},this.entityInverted=t=>this._config.inverted_entities.includes(t),this.previousDur={},this.circleRate=(t,i)=>{const e=this._config.max_expected_energy,o=this._config.min_expected_energy,n=this._config.max_flow_rate,r=this._config.min_flow_rate;return this.mapRange(t,n,r,o,e)},this.getEntityStateObj=t=>{if(t&&this.entityAvailable(t))return this.hass.states[t];this.unavailableOrMisconfiguredError(t)},this.additionalCircleRate=(t,i)=>!0===t&&i?i:mt(t)?t:1.66,this.getEntityState=t=>t&&this.entityAvailable(t)?bt(this.hass.states[t].state):(this.unavailableOrMisconfiguredError(t),0),this.getEntityStateWatts=t=>{var i,e;if(!t||!this.entityAvailable(t))return this.unavailableOrMisconfiguredError(t),0;const o=!1!==this._config.energy_date_selection?this.states[t]:null===(i=this.hass)||void 0===i?void 0:i.states[t],n=bt(null==o?void 0:o.state);return"Wh"!==(null===(e=null==o?void 0:o.attributes)||void 0===e?void 0:e.unit_of_measurement)?1e3*n:n},this.displayNonFossilState=(t,i)=>{var e,o,n,r,s;if(!t||!this.entityAvailable(t))return this.unavailableOrMisconfiguredError(t),"NaN";const l=null===(o=null===(e=this._config.entities.fossil_fuel_percentage)||void 0===e?void 0:e.unit_white_space)||void 0===o||o,a="percentage"===(null===(n=this._config.entities.fossil_fuel_percentage)||void 0===n?void 0:n.state_type)?"%":"W",d=1-this.getEntityState(t)/100;let c,v;c="string"==typeof this._config.entities.grid.entity?i:this.getEntityStateWatts(this._config.entities.grid.entity.consumption)||0;const u=null!==(s=null===(r=this._config.entities.fossil_fuel_percentage)||void 0===r?void 0:r.display_zero_tolerance)&&void 0!==s?s:0;if("W"===a){let t=c*d;u&&t<u&&(t=0),v=this.displayValue(t,"W",l)}else{let i=100-this.getEntityState(t);u&&i<u&&(i=0),v=i.toFixed(0).toString().concat(!1===l?"":" ").concat(a)}return v},this.displayValue=(t,i,e)=>{if(null===t)return"0";if(Number.isNaN(+t))return t;const o=Number(t),n=void 0===i&&o>=this._config.wh_kwh_threshold;return`${ft(n?gt(o/1e3,this._config.kwh_decimals):gt(o,this._config.wh_decimals),this.hass.locale)}${!1===e?"":" "}${i||(n?"kWh":"Wh")}`}}static getStubConfig(t){return function(t){var i,e,o,n;function r(i,e){const o=t.states[i].attributes.friendly_name;return e.some((t=>i.includes(t)||(null==o?void 0:o.includes(t))))}const s=Object.keys(t.states).filter((i=>{const e=t.states[i];return e.state&&e.attributes&&"energy"===e.attributes.device_class||e.entity_id.includes("energy")})),l=["grid","utility","net","meter"],a=["solar","pv","photovoltaic","inverter"],d=["battery"],c=s.filter((t=>r(t,d))),v=s.filter((t=>r(t,l))),u=s.filter((t=>r(t,a)))[0];return{type:"custom:energy-flow-card-plus",entities:{battery:{entity:{consumption:null!==(i=c[0])&&void 0!==i?i:"",production:null!==(e=c[1])&&void 0!==e?e:""}},grid:{entity:{consumption:null!==(o=v[0])&&void 0!==o?o:"",production:null!==(n=v[1])&&void 0!==n?n:""}},solar:u?{entity:u,display_zero_state:!0}:void 0},clickable_entities:!0,display_zero_lines:!0,use_new_flow_rate_model:!0,energy_date_selection:!0,wh_decimals:Wt,kwh_decimals:Bt,min_flow_rate:Lt,max_flow_rate:Vt,max_expected_energy:Gt,min_expected_energy:Yt,wh_kwh_threshold:qt}}(t)}hassSubscribe(){var t;if(!1===(null===(t=this._config)||void 0===t?void 0:t.energy_date_selection))return[];const i=Date.now(),e=(t,o)=>{const n=jt(this.hass);n?t(n):Date.now()-i>1e4?(console.debug(jt(this.hass)),o(new Error("No energy data received. Make sure to add a `type: energy-date-selection` card to this screen."))):setTimeout((()=>e(t,o)),100)},o=new Promise(e);return setTimeout((()=>{this.error||Object.keys(this.states).length||(this.error=new Error("Something went wrong. No energy data received."),console.debug(jt(this.hass)))}),2e4),o.catch((t=>{this.error=t})),[o.then((async t=>t.subscribe((async t=>{if(this.entitiesArr){const i=await async function(t,i,e){const o=Nt(i.end||new Date,i.start),n=Mt(i.start,-1),r=o>35?"month":o>2?"day":"hour",s=await((t,i,e,o,n="hour")=>t.callWS({type:"recorder/statistics_during_period",start_time:i.toISOString(),end_time:null==e?void 0:e.toISOString(),statistic_ids:o,period:n}))(t,n,i.end,e,r);return Object.values(s).forEach((t=>{t.length&&new Date(t[0].start)>n&&t.unshift(Object.assign(Object.assign({},t[0]),{start:n.toISOString(),end:n.toISOString(),sum:0,state:0}))})),e.reduce(((t,i)=>Object.assign(Object.assign({},t),{[i]:Tt(s[i])})),{})}(this.hass,t,this.entitiesArr),e={};Object.keys(i).forEach((t=>{this.hass.states[t]&&(e[t]=Object.assign(Object.assign({},this.hass.states[t]),{state:String(i[t])}))})),this.states=e}}))))]}setConfig(t){var i,e,o,n,r,s;if("object"!=typeof t)throw new Error(function(t,i="",e=""){const o=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let n;try{n=t.split(".").reduce(((t,i)=>t[i]),ut[o])}catch(i){n=t.split(".").reduce(((t,i)=>t[i]),ut.en)}return void 0===n&&(n=t.split(".").reduce(((t,i)=>t&&t[i]),ut.en)),""!==i&&""!==e&&(n=n.replace(i,e)),n}("common.invalid_configuration"));if(!t.entities||!(null===(e=null===(i=t.entities)||void 0===i?void 0:i.battery)||void 0===e?void 0:e.entity)&&!(null===(n=null===(o=t.entities)||void 0===o?void 0:o.grid)||void 0===n?void 0:n.entity)&&!(null===(s=null===(r=t.entities)||void 0===r?void 0:r.solar)||void 0===s?void 0:s.entity))throw new Error("At least one entity for battery, grid or solar must be defined");this._config=Object.assign(Object.assign({},t),{inverted_entities:$t(t.inverted_entities,","),kwh_decimals:bt(t.kwh_decimals,Bt),min_flow_rate:bt(t.min_flow_rate,Lt),max_flow_rate:bt(t.max_flow_rate,Vt),wh_decimals:bt(t.wh_decimals,Wt),wh_kwh_threshold:bt(t.wh_kwh_threshold,qt),max_expected_energy:bt(t.max_expected_energy,Gt),min_expected_energy:bt(t.min_expected_energy,Yt)}),this.populateEntitiesArr(),this.resetSubscriptions()}populateEntitiesArr(){var t;this.entitiesArr=[],Object.keys(null===(t=this._config)||void 0===t?void 0:t.entities).forEach((t=>{var i,e;"string"==typeof this._config.entities[t].entity?this.entitiesArr.push(this._config.entities[t].entity):"object"==typeof this._config.entities[t].entity&&(this.entitiesArr.push(null===(i=this._config.entities[t].entity)||void 0===i?void 0:i.consumption),this.entitiesArr.push(null===(e=this._config.entities[t].entity)||void 0===e?void 0:e.production))}))}getCardSize(){return 3}mapRange(t,i,e,o,n){return t>n?e:(t-o)*(e-i)/(n-o)+i}openDetails(t){if(!t||!this._config.clickable_entities)return;if(!this.entityExists(t))return;const i=new CustomEvent("hass-more-info",{composed:!0,detail:{entityId:t}});this.dispatchEvent(i)}hasField(t,i){var e,o;return!!(void 0!==t&&!0===(null==t?void 0:t.display_zero)||this.getEntityStateWatts(null==t?void 0:t.entity)>(null!==(e=null==t?void 0:t.display_zero_tolerance)&&void 0!==e?e:0)&&this.entityAvailable(null==t?void 0:t.entity)||i)&&"string"==typeof(null===(o=this.hass.states[null==t?void 0:t.entity])||void 0===o?void 0:o.state)}showLine(t){var i;return!1!==(null===(i=this._config)||void 0===i?void 0:i.display_zero_lines)||t>0}render(){var t,i,e,o,n,r,s,l,a,d,c,v,u,h,y,p,g,f,_,m,b,$,w,x,k,E,S,A,M,P,D,C,O,N,j,T,z,U,I,F,V,L,W,B,Y,G,q,K,J,Z,Q,X,tt,it,et,ot,nt,rt,st,lt,at,dt,ct,vt,ut,ht,yt,pt,gt,_t,mt,$t,wt,xt,kt,Et,St,At,Mt,Pt,Dt,Ct,Ot,Nt,jt,Tt,zt,Rt,Ut,It,Ft,Vt,Lt,Wt,Bt,Yt,Gt,qt,Jt,Zt,Qt,Xt,ti,ii,ei,oi,ni,ri,si,li,ai,di,ci,vi,ui,hi,yi,pi,gi,fi,_i,mi,bi,$i,wi,xi,ki,Ei,Si,Ai,Mi,Pi,Di,Ci,Oi,Ni,ji,Ti,zi,Ri,Hi,Ui,Ii,Fi,Vi,Li,Wi,Bi,Yi,Gi,qi,Ki,Ji,Zi,Qi,Xi,te,ie,ee,oe,ne,re,se,le,ae,de,ce,ve,ue,he,ye,pe,ge,fe,_e,me,be,$e,we,xe,ke,Ee,Se,Ae,Me,Pe,De,Ce,Oe,Ne,je,Te,ze,Re,He,Ue,Ie,Fe,Ve,Le,We,Be,Ye,Ge,qe,Ke,Je,Ze,Qe,Xe,to,io,eo,oo,no,ro,so,lo,ao,co,vo,uo,ho,yo,po,go,fo,_o,mo,bo,$o,wo,xo,ko,Eo,So,Ao,Mo,Po,Do,Co,Oo,No;if(!this._config||!this.hass)return R``;const{entities:jo}=this._config;function To(t){return"#".concat(t.map((t=>t.toString(16).padStart(2,"0"))).join(""))}this.style.setProperty("--clickable-cursor",this._config.clickable_entities?"pointer":"default");const zo=void 0!==(null===(t=null==jo?void 0:jo.grid)||void 0===t?void 0:t.entity),Ro=this.hasField(null===(i=jo.grid)||void 0===i?void 0:i.power_outage,!0)&&this.hass.states[jo.grid.power_outage.entity].state===(null!==(o=null===(e=jo.grid)||void 0===e?void 0:e.power_outage.state_alert)&&void 0!==o?o:"on"),Ho=void 0!==(null===(n=null==jo?void 0:jo.battery)||void 0===n?void 0:n.entity),Uo=this.hasField(jo.individual2),Io=this.hasField(null===(r=jo.individual2)||void 0===r?void 0:r.secondary_info,!0),Fo=this.hasField(jo.individual1),Vo=this.hasField(null===(s=jo.individual1)||void 0===s?void 0:s.secondary_info,!0),Lo=void 0!==jo.solar,Wo=this.hasField(null===(l=jo.solar)||void 0===l?void 0:l.secondary_info),Bo=this.hasField(null===(a=jo.home)||void 0===a?void 0:a.secondary_info),Yo=zo&&("string"==typeof jo.grid.entity||jo.grid.entity.production);let Go=0,qo=0,Ko=null===(c=null===(d=this._config.entities.grid)||void 0===d?void 0:d.color)||void 0===c?void 0:c.consumption;void 0!==Ko&&("object"==typeof Ko&&(Ko=To(Ko)),this.style.setProperty("--energy-grid-consumption-color",Ko||"var(--energy-grid-consumption-color)")),zo&&(Go="string"==typeof jo.grid.entity?this.entityInverted("grid")?Math.abs(Math.min(this.getEntityStateWatts(null===(v=jo.grid)||void 0===v?void 0:v.entity),0)):Math.max(this.getEntityStateWatts(null===(u=jo.grid)||void 0===u?void 0:u.entity),0):this.getEntityStateWatts(jo.grid.entity.consumption)),void 0!==(null===(h=this._config.entities.grid)||void 0===h?void 0:h.display_zero_tolerance)&&(Go=Go>(null===(y=this._config.entities.grid)||void 0===y?void 0:y.display_zero_tolerance)?Go:0);const Jo=this.hasField(null===(p=jo.grid)||void 0===p?void 0:p.secondary_info);let Zo=null;if(Jo){const t=this.hass.states[null!==(_=null===(f=null===(g=this._config.entities.grid)||void 0===g?void 0:g.secondary_info)||void 0===f?void 0:f.entity)&&void 0!==_?_:0],i=Number(t.state);Zo=this.entityInverted("gridSecondary")?Math.abs(Math.min(i,0)):Math.max(i,0)}let Qo=null===(b=null===(m=this._config.entities.grid)||void 0===m?void 0:m.color)||void 0===b?void 0:b.production;void 0!==Qo&&("object"==typeof Qo&&(Qo=To(Qo)),this.style.setProperty("--energy-grid-return-color",Qo||"#a280db")),Yo&&(qo="string"==typeof jo.grid.entity?this.entityInverted("grid")?Math.max(this.getEntityStateWatts(jo.grid.entity),0):Math.abs(Math.min(this.getEntityStateWatts(jo.grid.entity),0)):this.getEntityStateWatts(null===($=jo.grid)||void 0===$?void 0:$.entity.production)),void 0!==(null===(w=this._config.entities.grid)||void 0===w?void 0:w.display_zero_tolerance)&&(qo=qo>(null===(x=this._config.entities.grid)||void 0===x?void 0:x.display_zero_tolerance)?qo:0);const Xo="object"==typeof(null===(k=jo.grid)||void 0===k?void 0:k.entity)?jo.grid.entity.consumption||jo.grid.entity.production:null===(E=jo.grid)||void 0===E?void 0:E.entity,tn=Ro?(null===(P=jo.grid)||void 0===P?void 0:P.power_outage.icon_alert)||"mdi:transmission-tower-off":(null===(S=jo.grid)||void 0===S?void 0:S.icon)||(null===(A=jo.grid)||void 0===A?void 0:A.use_metadata)&&(null===(M=this.getEntityStateObj(Xo))||void 0===M?void 0:M.attributes.icon)||"mdi:transmission-tower",en=(null===(D=jo.grid)||void 0===D?void 0:D.name)||(null===(C=jo.grid)||void 0===C?void 0:C.use_metadata)&&(null===(O=this.getEntityStateObj(Xo))||void 0===O?void 0:O.attributes.friendly_name)||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid"),on=null===(N=jo.grid)||void 0===N?void 0:N.color_icon;this.style.setProperty("--icon-grid-color","consumption"===on?"var(--energy-grid-consumption-color)":"production"===on?"var(--energy-grid-return-color)":!0===on?Go>=qo?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)");const nn=null===(T=null===(j=this._config.entities.grid)||void 0===j?void 0:j.secondary_info)||void 0===T?void 0:T.color_value;this.style.setProperty("--secondary-text-grid-color","consumption"===nn?"var(--energy-grid-consumption-color)":"production"===nn?"var(--energy-grid-return-color)":!0===nn?Go>=qo?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)");const rn=null===(z=this._config.entities.grid)||void 0===z?void 0:z.color_circle;this.style.setProperty("--circle-grid-color","consumption"===rn?"var(--energy-grid-consumption-color)":"production"===rn?"var(--energy-grid-return-color)":!0===rn?Go>=qo?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--energy-grid-consumption-color)");let sn=null,ln=null;const an=(null===(U=this._config.entities.individual1)||void 0===U?void 0:U.name)||(null===(F=this.getEntityStateObj(null===(I=jo.individual1)||void 0===I?void 0:I.entity))||void 0===F?void 0:F.attributes.friendly_name)||"Car",dn=(null===(V=this._config.entities.individual1)||void 0===V?void 0:V.icon)||(null===(W=this.getEntityStateObj(null===(L=jo.individual1)||void 0===L?void 0:L.entity))||void 0===W?void 0:W.attributes.icon)||"mdi:car-electric";let cn=null===(B=this._config.entities.individual1)||void 0===B?void 0:B.color;if(void 0!==cn&&("object"==typeof cn&&(cn=To(cn)),this.style.setProperty("--individualone-color",cn)),this.style.setProperty("--icon-individualone-color",(null===(Y=this._config.entities.individual1)||void 0===Y?void 0:Y.color_icon)?"var(--individualone-color)":"var(--primary-text-color)"),Fo){const t=this.hass.states[null===(G=this._config.entities.individual1)||void 0===G?void 0:G.entity],i=Number(t.state);sn=this.entityInverted("individual1")?Math.abs(Math.min(i,0)):Math.max(i,0)}if(Vo){const t=this.hass.states[null===(K=null===(q=this._config.entities.individual1)||void 0===q?void 0:q.secondary_info)||void 0===K?void 0:K.entity].state;"number"==typeof t?ln=this.entityInverted("individual1Secondary")?Math.abs(Math.min(t,0)):Math.max(t,0):"string"==typeof t&&(ln=t)}let vn=null,un=null;const hn=(null===(J=this._config.entities.individual2)||void 0===J?void 0:J.name)||(null===(Q=this.getEntityStateObj(null===(Z=jo.individual2)||void 0===Z?void 0:Z.entity))||void 0===Q?void 0:Q.attributes.friendly_name)||"Motorcycle",yn=(null===(X=this._config.entities.individual2)||void 0===X?void 0:X.icon)||(null===(it=this.getEntityStateObj(null===(tt=jo.individual2)||void 0===tt?void 0:tt.entity))||void 0===it?void 0:it.attributes.icon)||"mdi:motorbike-electric";let pn=null===(et=this._config.entities.individual2)||void 0===et?void 0:et.color;if(void 0!==pn&&("object"==typeof pn&&(pn=To(pn)),this.style.setProperty("--individualtwo-color",pn)),this.style.setProperty("--icon-individualtwo-color",(null===(ot=this._config.entities.individual2)||void 0===ot?void 0:ot.color_icon)?"var(--individualtwo-color)":"var(--primary-text-color)"),Uo){const t=this.hass.states[null===(nt=this._config.entities.individual2)||void 0===nt?void 0:nt.entity],i=Number(t.state);vn=this.entityInverted("individual2")?Math.abs(Math.min(i,0)):Math.max(i,0)}if(Io){const t=this.hass.states[null===(st=null===(rt=this._config.entities.individual2)||void 0===rt?void 0:rt.secondary_info)||void 0===st?void 0:st.entity].state;"number"==typeof t?un=this.entityInverted("individual2Secondary")?Math.abs(Math.min(t,0)):Math.max(t,0):"string"==typeof t&&(un=t)}let gn=null;if(Wo){const t=this.hass.states[null===(at=null===(lt=this._config.entities.solar)||void 0===lt?void 0:lt.secondary_info)||void 0===at?void 0:at.entity],i=Number(t.state);gn=this.entityInverted("solarSecondary")?Math.abs(Math.min(i,0)):Math.max(i,0)}let fn=null;if(Bo){const t=this.hass.states[null===(ct=null===(dt=this._config.entities.home)||void 0===dt?void 0:dt.secondary_info)||void 0===ct?void 0:ct.entity],i=Number(t.state);fn=this.entityInverted("homeSecondary")?Math.abs(Math.min(i,0)):Math.max(i,0)}let _n=0;if(void 0!==(null===(vt=this._config.entities.solar)||void 0===vt?void 0:vt.color)){let t=null===(ut=this._config.entities.solar)||void 0===ut?void 0:ut.color;"object"==typeof t&&(t=To(t)),this.style.setProperty("--energy-solar-color",t||"#ff9800")}this.style.setProperty("--icon-solar-color",(null===(ht=this._config.entities.solar)||void 0===ht?void 0:ht.color_icon)?"var(--energy-solar-color)":"var(--primary-text-color)"),Lo&&(_n=this.entityInverted("solar")?Math.abs(Math.min(this.getEntityStateWatts(null===(yt=jo.solar)||void 0===yt?void 0:yt.entity),0)):Math.max(this.getEntityStateWatts(null===(pt=jo.solar)||void 0===pt?void 0:pt.entity),0),(null===(gt=jo.solar)||void 0===gt?void 0:gt.display_zero_tolerance)&&jo.solar.display_zero_tolerance>=_n&&(_n=0));let mn=0,bn=0;Ho&&("string"==typeof(null===(_t=jo.battery)||void 0===_t?void 0:_t.entity)?(mn=this.entityInverted("battery")?Math.max(this.getEntityStateWatts(jo.battery.entity),0):Math.abs(Math.min(this.getEntityStateWatts(jo.battery.entity),0)),bn=this.entityInverted("battery")?Math.abs(Math.min(this.getEntityStateWatts(jo.battery.entity),0)):Math.max(this.getEntityStateWatts(jo.battery.entity),0)):(mn=this.getEntityStateWatts(null===($t=null===(mt=jo.battery)||void 0===mt?void 0:mt.entity)||void 0===$t?void 0:$t.production),bn=this.getEntityStateWatts(null===(xt=null===(wt=jo.battery)||void 0===wt?void 0:wt.entity)||void 0===xt?void 0:xt.consumption)),(null===(kt=null==jo?void 0:jo.battery)||void 0===kt?void 0:kt.display_zero_tolerance)&&(jo.battery.display_zero_tolerance>=mn&&(mn=0),jo.battery.display_zero_tolerance>=bn&&(bn=0)));let $n=null;Lo&&($n=_n-(null!=qo?qo:0)-(null!=mn?mn:0));let wn=null,xn=null;null!==$n&&$n<0&&(Ho&&(wn=Math.abs($n),wn>Go&&(xn=Math.min(wn-Go,0),wn=Go)),$n=0);let kn=null;Lo&&Ho?(xn||(xn=Math.max(0,(qo||0)-(_n||0)-(mn||0)-(wn||0))),kn=mn-(wn||0)):!Lo&&Ho&&(xn=qo);let En=0;Lo&&qo&&(En=qo-(null!=xn?xn:0));let Sn=0;Ho&&(Sn=(null!=bn?bn:0)-(null!=xn?xn:0));let An=null===(St=null===(Et=this._config.entities.battery)||void 0===Et?void 0:Et.color)||void 0===St?void 0:St.consumption;void 0!==An&&("object"==typeof An&&(An=To(An)),this.style.setProperty("--energy-battery-out-color",An||"#4db6ac"));let Mn=null===(Mt=null===(At=this._config.entities.battery)||void 0===At?void 0:At.color)||void 0===Mt?void 0:Mt.production;void 0!==Mn&&("object"==typeof Mn&&(Mn=To(Mn)),this.style.setProperty("--energy-battery-in-color",Mn||"#a280db"));const Pn="object"==typeof(null===(Pt=jo.battery)||void 0===Pt?void 0:Pt.entity)?jo.battery.entity.consumption:null===(Dt=jo.battery)||void 0===Dt?void 0:Dt.entity,Dn=(null===(Ct=jo.battery)||void 0===Ct?void 0:Ct.name)||(null===(Ot=jo.battery)||void 0===Ot?void 0:Ot.use_metadata)&&(null===(Nt=this.getEntityStateObj(Pn))||void 0===Nt?void 0:Nt.attributes.friendly_name)||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery"),Cn=null===(jt=this._config.entities.battery)||void 0===jt?void 0:jt.color_icon;this.style.setProperty("--icon-battery-color","consumption"===Cn?"var(--energy-battery-in-color)":"production"===Cn?"var(--energy-battery-out-color)":!0===Cn?bn>=mn?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)");const On=null===(Tt=this._config.entities.battery)||void 0===Tt?void 0:Tt.color_state_of_charge_value;this.style.setProperty("--text-battery-state-of-charge-color","consumption"===On?"var(--energy-battery-in-color)":"production"===On?"var(--energy-battery-out-color)":!0===On?bn>=mn?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)");const Nn=null===(zt=this._config.entities.battery)||void 0===zt?void 0:zt.color_circle;this.style.setProperty("--circle-battery-color","consumption"===Nn?"var(--energy-battery-in-color)":"production"===Nn||!0===Nn&&bn>=mn?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)");const jn=Math.max(Go-(null!=wn?wn:0),0),Tn=bt(sn,0)+bt(vn,0),zn=Math.max(jn+(null!=$n?$n:0)+(null!=Sn?Sn:0),0);let Rn=0;Sn&&(Rn=Kt*(Sn/zn));let Hn=0;Lo&&(Hn=Kt*($n/zn));const Un=this.hasField(null===(Rt=jo.fossil_fuel_percentage)||void 0===Rt?void 0:Rt.secondary_info,!0);let In=null;if(Un){const t=this.hass.states[null===(It=null===(Ut=this._config.entities.fossil_fuel_percentage)||void 0===Ut?void 0:Ut.secondary_info)||void 0===It?void 0:It.entity].state;"number"==typeof t?In=this.entityInverted("nonFossilSecondary")?Math.abs(Math.min(t,0)):Math.max(t,0):"string"==typeof t&&(In=t)}const Fn=1*jn-this.getEntityState(null===(Ft=jo.fossil_fuel_percentage)||void 0===Ft?void 0:Ft.entity)/100>0&&void 0!==(null===(Vt=jo.fossil_fuel_percentage)||void 0===Vt?void 0:Vt.entity)&&this.entityAvailable(null===(Lt=jo.fossil_fuel_percentage)||void 0===Lt?void 0:Lt.entity),Vn=void 0!==(null===(Wt=jo.fossil_fuel_percentage)||void 0===Wt?void 0:Wt.entity)&&!0===(null===(Bt=jo.fossil_fuel_percentage)||void 0===Bt?void 0:Bt.display_zero)||Fn;let Ln,Wn=0;if(Fn){Ln=jn*(1-this.getEntityState(null===(Yt=jo.fossil_fuel_percentage)||void 0===Yt?void 0:Yt.entity)/100),Wn=Kt*(Ln/zn)}const Bn=Kt*((zn-(null!=Ln?Ln:0)-(null!=Sn?Sn:0)-(null!=$n?$n:0))/zn),Yn=jn+(null!=$n?$n:0)+En+(null!=kn?kn:0)+(null!=Sn?Sn:0)+(null!=wn?wn:0)+(null!=xn?xn:0),Gn=(null===(qt=null===(Gt=jo.battery)||void 0===Gt?void 0:Gt.state_of_charge)||void 0===qt?void 0:qt.length)?this.getEntityState(null===(Jt=jo.battery)||void 0===Jt?void 0:Jt.state_of_charge):null;let qn="mdi:battery-high";null===Gn?qn="mdi:battery-high":Gn<=72&&Gn>44?qn="mdi:battery-medium":Gn<=44&&Gn>16?qn="mdi:battery-low":Gn<=16&&(qn="mdi:battery-outline"),void 0!==(null===(Zt=jo.battery)||void 0===Zt?void 0:Zt.icon)&&(qn=null===(Qt=jo.battery)||void 0===Qt?void 0:Qt.icon);const Kn={batteryGrid:this.circleRate(null!==(Xt=null!=wn?wn:xn)&&void 0!==Xt?Xt:0,Yn),batteryToHome:this.circleRate(null!=Sn?Sn:0,Yn),gridToHome:this.circleRate(jn,Yn),solarToBattery:this.circleRate(null!=kn?kn:0,Yn),solarToGrid:this.circleRate(En,Yn),solarToHome:this.circleRate(null!=$n?$n:0,Yn),individual1:this.circleRate(null!=sn?sn:0,Tn),individual2:this.circleRate(null!=vn?vn:0,Tn),nonFossil:this.circleRate(null!=Ln?Ln:0,Yn)};["batteryGrid","batteryToHome","gridToHome","solarToBattery","solarToGrid","solarToHome"].forEach((t=>{const i=this[`${t}Flow`];i&&this.previousDur[t]&&this.previousDur[t]!==Kn[t]&&(i.pauseAnimations(),i.setCurrentTime(i.getCurrentTime()*(Kn[t]/this.previousDur[t])),i.unpauseAnimations()),this.previousDur[t]=Kn[t]}));let Jn=null===(ti=this._config.entities.fossil_fuel_percentage)||void 0===ti?void 0:ti.color;void 0!==Jn&&("object"==typeof Jn&&(Jn=To(Jn)),this.style.setProperty("--non-fossil-color",Jn||"var(--energy-non-fossil-color)")),this.style.setProperty("--icon-non-fossil-color",(null===(ii=this._config.entities.fossil_fuel_percentage)||void 0===ii?void 0:ii.color_icon)?"var(--non-fossil-color)":"var(--primary-text-color)");const Zn=null===(ei=this._config.entities.home)||void 0===ei?void 0:ei.color_icon,Qn={battery:{value:Rn,color:"var(--energy-battery-out-color)"},solar:{value:Hn,color:"var(--energy-solar-color)"},grid:{value:Bn,color:"var(--energy-grid-consumption-color)"},gridNonFossil:{value:Wn,color:"var(--energy-non-fossil-color)"}},Xn=Object.keys(Qn).reduce(((t,i)=>Qn[t].value>Qn[i].value?t:i));let tr="var(--primary-text-color)";"solar"===Zn?tr="var(--energy-solar-color)":"battery"===Zn?tr="var(--energy-battery-out-color)":"grid"===Zn?tr="var(--energy-grid-consumption-color)":!0===Zn&&(tr=Qn[Xn].color),this.style.setProperty("--icon-home-color",tr);const ir=null===(oi=this._config.entities.home)||void 0===oi?void 0:oi.color_value;let er="var(--primary-text-color)";"solar"===ir?er="var(--energy-solar-color)":"battery"===ir?er="var(--energy-battery-out-color)":"grid"===ir?er="var(--energy-grid-consumption-color)":!0===ir&&(er=Qn[Xn].color);const or=(null===(ni=jo.solar)||void 0===ni?void 0:ni.icon)||(null===(ri=jo.solar)||void 0===ri?void 0:ri.use_metadata)&&(null===(li=null===(si=this.getEntityStateObj(jo.solar.entity))||void 0===si?void 0:si.attributes)||void 0===li?void 0:li.icon)||"mdi:solar-power",nr=(null===(ai=jo.solar)||void 0===ai?void 0:ai.name)||(null===(di=jo.solar)||void 0===di?void 0:di.use_metadata)&&(null===(ci=this.getEntityStateObj(jo.solar.entity))||void 0===ci?void 0:ci.attributes.friendly_name)||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.solar"),rr=(null===(vi=jo.home)||void 0===vi?void 0:vi.icon)||(null===(ui=jo.home)||void 0===ui?void 0:ui.use_metadata)&&(null===(yi=null===(hi=this.getEntityStateObj(jo.home.entity))||void 0===hi?void 0:hi.attributes)||void 0===yi?void 0:yi.icon)||"mdi:home",sr=(null===(pi=jo.home)||void 0===pi?void 0:pi.name)||(null===(gi=jo.home)||void 0===gi?void 0:gi.use_metadata)&&(null===(fi=this.getEntityStateObj(jo.home.entity))||void 0===fi?void 0:fi.attributes.friendly_name)||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.home"),lr=(null===(_i=jo.fossil_fuel_percentage)||void 0===_i?void 0:_i.icon)||(null===(mi=jo.fossil_fuel_percentage)||void 0===mi?void 0:mi.use_metadata)&&(null===($i=null===(bi=this.getEntityStateObj(jo.fossil_fuel_percentage.entity))||void 0===bi?void 0:bi.attributes)||void 0===$i?void 0:$i.icon)||"mdi:leaf",ar=(null===(wi=jo.fossil_fuel_percentage)||void 0===wi?void 0:wi.name)||(null===(xi=jo.fossil_fuel_percentage)||void 0===xi?void 0:xi.use_metadata)&&(null===(ki=this.getEntityStateObj(jo.fossil_fuel_percentage.entity))||void 0===ki?void 0:ki.attributes.friendly_name)||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.low_carbon");return this.style.setProperty("--text-home-color",er),this.style.setProperty("--text-solar-color",(null===(Ei=this._config.entities.solar)||void 0===Ei?void 0:Ei.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),this.style.setProperty("--text-non-fossil-color",(null===(Si=this._config.entities.fossil_fuel_percentage)||void 0===Si?void 0:Si.color_value)?"var(--energy-non-fossil-color)":"var(--primary-text-color)"),this.style.setProperty("--secondary-text-non-fossil-color",(null===(Mi=null===(Ai=this._config.entities.fossil_fuel_percentage)||void 0===Ai?void 0:Ai.secondary_info)||void 0===Mi?void 0:Mi.color_value)?"var(--energy-non-fossil-color)":"var(--primary-text-color)"),this.style.setProperty("--text-individualone-color",(null===(Pi=this._config.entities.individual1)||void 0===Pi?void 0:Pi.color_value)?"var(--individualone-color)":"var(--primary-text-color)"),this.style.setProperty("--text-individualtwo-color",(null===(Di=this._config.entities.individual2)||void 0===Di?void 0:Di.color_value)?"var(--individualtwo-color)":"var(--primary-text-color)"),this.style.setProperty("--secondary-text-individualone-color",(null===(Oi=null===(Ci=this._config.entities.individual1)||void 0===Ci?void 0:Ci.secondary_info)||void 0===Oi?void 0:Oi.color_value)?"var(--individualone-color)":"var(--primary-text-color)"),this.style.setProperty("--secondary-text-individualtwo-color",(null===(ji=null===(Ni=this._config.entities.individual2)||void 0===Ni?void 0:Ni.secondary_info)||void 0===ji?void 0:ji.color_value)?"var(--individualtwo-color)":"var(--primary-text-color)"),this.style.setProperty("--secondary-text-solar-color",(null===(zi=null===(Ti=this._config.entities.solar)||void 0===Ti?void 0:Ti.secondary_info)||void 0===zi?void 0:zi.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),this.style.setProperty("--secondary-text-home-color",(null===(Hi=null===(Ri=this._config.entities.home)||void 0===Ri?void 0:Ri.secondary_info)||void 0===Hi?void 0:Hi.color_value)?"var(--text-home-color)":"var(--primary-text-color)"),R`<ha-card .header="${this._config.title}"><div class="card-content">${Lo||Uo||Fo||Vn?R`<div class="row">${Vn?R`<div class="circle-container low-carbon"><span class="label">${ar}</span><div class="circle" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.fossil_fuel_percentage)||void 0===i?void 0:i.entity)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.fossil_fuel_percentage)||void 0===i?void 0:i.entity))}}">${Un?R`<span class="secondary-info low-carbon" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.fossil_fuel_percentage)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.fossil_fuel_percentage)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(Ii=null===(Ui=jo.fossil_fuel_percentage)||void 0===Ui?void 0:Ui.secondary_info)||void 0===Ii?void 0:Ii.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(Vi=null===(Fi=jo.fossil_fuel_percentage)||void 0===Fi?void 0:Fi.secondary_info)||void 0===Vi?void 0:Vi.icon}"></ha-icon>`:""} ${this.displayValue(In,null===(Wi=null===(Li=jo.fossil_fuel_percentage)||void 0===Li?void 0:Li.secondary_info)||void 0===Wi?void 0:Wi.unit_of_measurement,null===(Yi=null===(Bi=jo.fossil_fuel_percentage)||void 0===Bi?void 0:Bi.secondary_info)||void 0===Yi?void 0:Yi.unit_white_space)}</span>`:""}<ha-icon .icon="${lr}" class="low-carbon" style="${Un?"padding-top: 2px;":"padding-top: 0px;"}${!1!==(null===(Gi=jo.fossil_fuel_percentage)||void 0===Gi?void 0:Gi.display_zero_state)||(Ln||0)>((null===(qi=jo.fossil_fuel_percentage)||void 0===qi?void 0:qi.display_zero_tolerance)||0)?"padding-bottom: 2px;":"padding-bottom: 0px;"}"></ha-icon>${!1!==(null===(Ki=jo.fossil_fuel_percentage)||void 0===Ki?void 0:Ki.display_zero_state)||(Ln||0)>((null===(Ji=jo.fossil_fuel_percentage)||void 0===Ji?void 0:Ji.display_zero_tolerance)||0)?R`<span class="low-carbon">${this.displayNonFossilState(jo.fossil_fuel_percentage.entity,Go)}</span>`:""}</div>${this.showLine(Ln||0)?R`<svg width="80" height="30"><path d="M40 -10 v40" class="low-carbon" id="low-carbon"/>${Fn?H`<circle r="2.4" class="low-carbon" vector-effect="non-scaling-stroke"><animateMotion dur="${this.additionalCircleRate(null===(Zi=jo.fossil_fuel_percentage)||void 0===Zi?void 0:Zi.calculate_flow_rate,Kn.nonFossil)}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#low-carbon"></animateMotion></circle>`:""}</svg>`:""}</div>`:R`<div class="spacer"></div>`} ${Lo?R`<div class="circle-container solar"><span class="label">${nr}</span><div class="circle" @click="${t=>{t.stopPropagation(),this.openDetails(jo.solar.entity)}}" @keyDown="${t=>{"Enter"===t.key&&(t.stopPropagation(),this.openDetails(jo.solar.entity))}}">${Wo?R`<span class="secondary-info solar" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.solar)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.solar)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(Xi=null===(Qi=jo.solar)||void 0===Qi?void 0:Qi.secondary_info)||void 0===Xi?void 0:Xi.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(ie=null===(te=jo.solar)||void 0===te?void 0:te.secondary_info)||void 0===ie?void 0:ie.icon}"></ha-icon>`:""} ${this.displayValue(gn,null===(oe=null===(ee=jo.solar)||void 0===ee?void 0:ee.secondary_info)||void 0===oe?void 0:oe.unit_of_measurement,null===(re=null===(ne=jo.solar)||void 0===ne?void 0:ne.secondary_info)||void 0===re?void 0:re.unit_white_space)}</span>`:""}<ha-icon id="solar-icon" .icon="${or}" style="${Wo?"padding-top: 2px;":"padding-top: 0px;"}${!1!==(null===(se=jo.solar)||void 0===se?void 0:se.display_zero_state)||(_n||0)>0?"padding-bottom: 2px;":"padding-bottom: 0px;"}"></ha-icon>${!1!==(null===(le=jo.solar)||void 0===le?void 0:le.display_zero_state)||(_n||0)>0?R`<span class="solar">${this.displayValue(_n)}</span>`:""}</div></div>`:Uo||Fo?R`<div class="spacer"></div>`:""} ${Uo?R`<div class="circle-container individual2"><span class="label">${hn}</span><div class="circle" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.individual2)||void 0===i?void 0:i.entity)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.individual2)||void 0===i?void 0:i.entity))}}">${Io?R`<span class="secondary-info individual2" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual2)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual2)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(de=null===(ae=jo.individual2)||void 0===ae?void 0:ae.secondary_info)||void 0===de?void 0:de.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(ve=null===(ce=jo.individual2)||void 0===ce?void 0:ce.secondary_info)||void 0===ve?void 0:ve.icon}"></ha-icon>`:""} ${this.displayValue(un,null===(he=null===(ue=jo.individual2)||void 0===ue?void 0:ue.secondary_info)||void 0===he?void 0:he.unit_of_measurement,null===(pe=null===(ye=jo.individual2)||void 0===ye?void 0:ye.secondary_info)||void 0===pe?void 0:pe.unit_white_space)}</span>`:""}<ha-icon id="individual2-icon" .icon="${yn}" style="${Io?"padding-top: 2px;":"padding-top: 0px;"}${!1!==(null===(ge=jo.individual2)||void 0===ge?void 0:ge.display_zero_state)||(vn||0)>0?"padding-bottom: 2px;":"padding-bottom: 0px;"}"></ha-icon>${!1!==(null===(fe=jo.individual2)||void 0===fe?void 0:fe.display_zero_state)||(vn||0)>0?R`<span class="individual2">${this.displayValue(vn,null===(_e=this._config.entities.individual2)||void 0===_e?void 0:_e.unit_of_measurement)}</span>`:""}</div>${this.showLine(vn||0)?R`<svg width="80" height="30"><path d="M40 -10 v50" id="individual2"/>${vn?H`<circle r="2.4" class="individual2" vector-effect="non-scaling-stroke"><animateMotion dur="${this.additionalCircleRate(null===(me=jo.individual2)||void 0===me?void 0:me.calculate_flow_rate,Kn.individual2)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${(null===(be=jo.individual2)||void 0===be?void 0:be.inverted_animation)?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual2"></animateMotion></circle>`:""}</svg>`:""}</div>`:Fo?R`<div class="circle-container individual1"><span class="label">${an}</span><div class="circle" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.individual1)||void 0===i?void 0:i.entity)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.individual1)||void 0===i?void 0:i.entity))}}">${Vo?R`<span class="secondary-info individual1" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual1)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual1)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(we=null===($e=jo.individual1)||void 0===$e?void 0:$e.secondary_info)||void 0===we?void 0:we.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(ke=null===(xe=jo.individual1)||void 0===xe?void 0:xe.secondary_info)||void 0===ke?void 0:ke.icon}"></ha-icon>`:""} ${this.displayValue(ln,null===(Se=null===(Ee=jo.individual1)||void 0===Ee?void 0:Ee.secondary_info)||void 0===Se?void 0:Se.unit_of_measurement,null===(Me=null===(Ae=jo.individual1)||void 0===Ae?void 0:Ae.secondary_info)||void 0===Me?void 0:Me.unit_white_space)}</span>`:""}<ha-icon id="individual1-icon" .icon="${dn}" style="${Vo?"padding-top: 2px;":"padding-top: 0px;"}${!1!==(null===(Pe=jo.individual1)||void 0===Pe?void 0:Pe.display_zero_state)||(sn||0)>0?"padding-bottom: 2px;":"padding-bottom: 0px;"}"></ha-icon>${!1!==(null===(De=jo.individual1)||void 0===De?void 0:De.display_zero_state)||(sn||0)>0?R`<span class="individual1">${this.displayValue(sn,null===(Ce=this._config.entities.individual1)||void 0===Ce?void 0:Ce.unit_of_measurement)}</span>`:""}</div>${this.showLine(sn||0)?R`<svg width="80" height="30"><path d="M40 -10 v40" id="individual1"/>${sn?H`<circle r="2.4" class="individual1" vector-effect="non-scaling-stroke"><animateMotion dur="${this.additionalCircleRate(null===(Oe=jo.individual1)||void 0===Oe?void 0:Oe.calculate_flow_rate,Kn.individual1)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${(null===(Ne=jo.individual1)||void 0===Ne?void 0:Ne.inverted_animation)?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual1"></animateMotion></circle>`:""}</svg>`:R``}</div>`:R`<div class="spacer"></div>`}</div>`:R``}<div class="row">${zo?R`<div class="circle-container grid"><div class="circle" @click="${t=>{const i="string"==typeof jo.grid.entity?jo.grid.entity:jo.grid.entity.consumption||jo.grid.entity.production;t.stopPropagation(),this.openDetails(i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof jo.grid.entity?jo.grid.entity:jo.grid.entity.consumption||jo.grid.entity.production;t.stopPropagation(),this.openDetails(i)}}}">${Jo?R`<span class="secondary-info grid" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.grid)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.grid)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(Te=null===(je=jo.grid)||void 0===je?void 0:je.secondary_info)||void 0===Te?void 0:Te.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(Re=null===(ze=jo.grid)||void 0===ze?void 0:ze.secondary_info)||void 0===Re?void 0:Re.icon}"></ha-icon>`:""} ${this.displayValue(Zo,null===(Ue=null===(He=jo.grid)||void 0===He?void 0:He.secondary_info)||void 0===Ue?void 0:Ue.unit_of_measurement,null===(Fe=null===(Ie=jo.grid)||void 0===Ie?void 0:Ie.secondary_info)||void 0===Fe?void 0:Fe.unit_white_space)}</span>`:""}<ha-icon .icon="${tn}"></ha-icon>${("two_way"===(null===(Ve=jo.grid)||void 0===Ve?void 0:Ve.display_state)||void 0===(null===(Le=jo.grid)||void 0===Le?void 0:Le.display_state)||"one_way"===(null===(We=jo.grid)||void 0===We?void 0:We.display_state)&&qo>0||"one_way_no_zero"===(null===(Be=jo.grid)||void 0===Be?void 0:Be.display_state)&&(null===Go||0===Go)&&0!==qo)&&null!==qo&&!Ro?R`<span class="return" @click="${t=>{const i="string"==typeof jo.grid.entity?jo.grid.entity:jo.grid.entity.production;t.stopPropagation(),this.openDetails(i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof jo.grid.entity?jo.grid.entity:jo.grid.entity.production;t.stopPropagation(),this.openDetails(i)}}}"><ha-icon class="small" .icon="${"mdi:arrow-left"}"></ha-icon>${this.displayValue(qo)}</span>`:null} ${("two_way"===(null===(Ye=jo.grid)||void 0===Ye?void 0:Ye.display_state)||void 0===(null===(Ge=jo.grid)||void 0===Ge?void 0:Ge.display_state)||"one_way"===(null===(qe=jo.grid)||void 0===qe?void 0:qe.display_state)&&Go>0||"one_way_no_zero"===(null===(Ke=jo.grid)||void 0===Ke?void 0:Ke.display_state)&&(null===qo||0===qo))&&null!==Go&&!Ro?R`<span class="consumption"><ha-icon class="small" .icon="${"mdi:arrow-right"}"></ha-icon>${this.displayValue(Go)}</span>`:""} ${Ro?R`<span class="grid power-outage">${(null===(Je=jo.grid)||void 0===Je?void 0:Je.power_outage.label_alert)||R`Power<br>Outage`}</span>`:""}</div><span class="label">${en}</span></div>`:R`<div class="spacer"></div>`}<div class="circle-container home"><div class="circle" id="home-circle" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.home)||void 0===i?void 0:i.entity)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.home)||void 0===i?void 0:i.entity))}}">${Bo?R`<span class="secondary-info home" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.home)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.home)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(Qe=null===(Ze=jo.home)||void 0===Ze?void 0:Ze.secondary_info)||void 0===Qe?void 0:Qe.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(to=null===(Xe=jo.home)||void 0===Xe?void 0:Xe.secondary_info)||void 0===to?void 0:to.icon}"></ha-icon>`:""} ${this.displayValue(fn,null===(eo=null===(io=jo.home)||void 0===io?void 0:io.secondary_info)||void 0===eo?void 0:eo.unit_of_measurement,null===(no=null===(oo=jo.home)||void 0===oo?void 0:oo.secondary_info)||void 0===no?void 0:no.unit_white_space)}</span>`:""}<ha-icon .icon="${rr}"></ha-icon>${(null===(ro=this._config.entities.home)||void 0===ro?void 0:ro.override_state)&&this._config.entities.home.entity?(null===(so=jo.home)||void 0===so?void 0:so.subtract_individual)?this.displayValue(Number(this.hass.states[this._config.entities.home.entity].state)-Tn):this.displayValue(this.hass.states[this._config.entities.home.entity].state):(null===(lo=this._config.entities.home)||void 0===lo?void 0:lo.subtract_individual)?this.displayValue(zn-Tn||0):this.displayValue(zn)} <svg>${void 0!==Hn?H`<circle class="solar" cx="40" cy="40" r="38" stroke-dasharray="${Hn} ${Kt-Hn}" shape-rendering="geometricPrecision" stroke-dashoffset="-${Kt-Hn}">`:""} ${Rn?H`<circle class="battery" cx="40" cy="40" r="38" stroke-dasharray="${Rn} ${Kt-Rn}" stroke-dashoffset="-${Kt-Rn-(Hn||0)}" shape-rendering="geometricPrecision">`:""} ${void 0!==Wn?H`<circle class="low-carbon" cx="40" cy="40" r="38" stroke-dasharray="${Wn} ${Kt-Wn}" stroke-dashoffset="-${Kt-Wn-(Rn||0)-(Hn||0)}" shape-rendering="geometricPrecision">`:""}<circle class="grid" cx="40" cy="40" r="38" stroke-dasharray="${null!=Bn?Bn:Kt-Hn-(Rn||0)} ${void 0!==Bn?Kt-Bn:Hn+(Rn||0)}" stroke-dashoffset="0" shape-rendering="geometricPrecision"/></svg></div>${this.showLine(sn||0)&&Uo?"":R`<span class="label">${sr}</span>`}</div></div>${Ho||Fo&&Uo?R`<div class="row"><div class="spacer"></div>${Ho?R`<div class="circle-container battery"><div class="circle" @click="${t=>{var i,e,o,n,r;const s=(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge)?null===(e=jo.battery)||void 0===e?void 0:e.state_of_charge:"string"==typeof(null===(o=jo.battery)||void 0===o?void 0:o.entity)?null===(n=jo.battery)||void 0===n?void 0:n.entity:null===(r=jo.battery)||void 0===r?void 0:r.entity.production;t.stopPropagation(),this.openDetails(s)}}" @keyDown="${t=>{var i,e;if("Enter"===t.key){const o=(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge)?null===(e=jo.battery)||void 0===e?void 0:e.state_of_charge:"string"==typeof jo.battery.entity?jo.battery.entity:jo.battery.entity.production;t.stopPropagation(),this.openDetails(o)}}}">${null!==Gn?R`<span @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge))}}" id="battery-state-of-charge-text">${ft(Gn,this.hass.locale,{maximumFractionDigits:0,minimumFractionDigits:0})}${!1===(null===(co=null===(ao=this._config.entities)||void 0===ao?void 0:ao.battery)||void 0===co?void 0:co.state_of_charge_unit_white_space)?"":" "}%</span>`:null}<ha-icon .icon="${qn}" style="${"two_way"===(null===(vo=jo.battery)||void 0===vo?void 0:vo.display_state)?"padding-top: 0px; padding-bottom: 2px;":"one_way"===(null===(uo=jo.battery)||void 0===uo?void 0:uo.display_state)&&0===mn&&0===bn?"padding-top: 2px; padding-bottom: 0px;":"padding-top: 2px; padding-bottom: 2px;"}" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.battery)||void 0===i?void 0:i.state_of_charge))}}"></ha-icon>${"two_way"===(null===(ho=jo.battery)||void 0===ho?void 0:ho.display_state)||void 0===(null===(yo=jo.battery)||void 0===yo?void 0:yo.display_state)||"one_way"===(null===(po=jo.battery)||void 0===po?void 0:po.display_state)&&mn>0||"one_way_no_zero"===(null===(go=jo.battery)||void 0===go?void 0:go.display_state)&&0!==mn?R`<span class="battery-in" @click="${t=>{const i="string"==typeof jo.battery.entity?jo.battery.entity:jo.battery.entity.production;t.stopPropagation(),this.openDetails(i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof jo.battery.entity?jo.battery.entity:jo.battery.entity.production;t.stopPropagation(),this.openDetails(i)}}}"><ha-icon class="small" .icon="${"mdi:arrow-down"}"></ha-icon>${this.displayValue(mn)}</span>`:""} ${"two_way"===(null===(fo=jo.battery)||void 0===fo?void 0:fo.display_state)||void 0===(null===(_o=jo.battery)||void 0===_o?void 0:_o.display_state)||"one_way"===(null===(mo=jo.battery)||void 0===mo?void 0:mo.display_state)&&bn>0||"one_way_no_zero"===(null===(bo=jo.battery)||void 0===bo?void 0:bo.display_state)&&(0===mn||0!==bn)?R`<span class="battery-out" @click="${t=>{const i="string"==typeof jo.battery.entity?jo.battery.entity:jo.battery.entity.consumption;t.stopPropagation(),this.openDetails(i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof jo.battery.entity?jo.battery.entity:jo.battery.entity.consumption;t.stopPropagation(),this.openDetails(i)}}}"><ha-icon class="small" .icon="${"mdi:arrow-up"}"></ha-icon>${this.displayValue(bn)}</span>`:""}</div><span class="label">${Dn}</span></div>`:R`<div class="spacer"></div>`} ${Uo&&Fo?R`<div class="circle-container individual1 bottom">${this.showLine(sn||0)?R`<svg width="80" height="30"><path d="M40 40 v-40" id="individual1"/>${sn?H`<circle r="2.4" class="individual1" vector-effect="non-scaling-stroke"><animateMotion dur="${this.additionalCircleRate(null===($o=jo.individual1)||void 0===$o?void 0:$o.calculate_flow_rate,Kn.individual1)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${(null===(wo=jo.individual1)||void 0===wo?void 0:wo.inverted_animation)?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual1"></animateMotion></circle>`:""}</svg>`:R`<svg width="80" height="30"></svg>`}<div class="circle" @click="${t=>{var i;t.stopPropagation(),this.openDetails(null===(i=jo.individual1)||void 0===i?void 0:i.entity)}}" @keyDown="${t=>{var i;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(i=jo.individual1)||void 0===i?void 0:i.entity))}}">${Vo?R`<span class="secondary-info individual1" @click="${t=>{var i,e;t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual1)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity)}}" @keyDown="${t=>{var i,e;"Enter"===t.key&&(t.stopPropagation(),this.openDetails(null===(e=null===(i=jo.individual1)||void 0===i?void 0:i.secondary_info)||void 0===e?void 0:e.entity))}}">${(null===(ko=null===(xo=jo.individual1)||void 0===xo?void 0:xo.secondary_info)||void 0===ko?void 0:ko.icon)?R`<ha-icon class="secondary-info small" .icon="${null===(So=null===(Eo=jo.individual1)||void 0===Eo?void 0:Eo.secondary_info)||void 0===So?void 0:So.icon}"></ha-icon>`:""} ${this.displayValue(ln,null===(Mo=null===(Ao=jo.individual1)||void 0===Ao?void 0:Ao.secondary_info)||void 0===Mo?void 0:Mo.unit_of_measurement,null===(Do=null===(Po=jo.individual1)||void 0===Po?void 0:Po.secondary_info)||void 0===Do?void 0:Do.unit_white_space)}</span>`:""}<ha-icon id="individual1-icon" .icon="${dn}" style="${Vo?"padding-top: 2px;":"padding-top: 0px;"}${!1!==(null===(Co=jo.individual1)||void 0===Co?void 0:Co.display_zero_state)||(sn||0)>0?"padding-bottom: 2px;":"padding-bottom: 0px;"}"></ha-icon>${!1!==(null===(Oo=jo.individual1)||void 0===Oo?void 0:Oo.display_zero_state)||(sn||0)>0?R`<span class="individual1">${this.displayValue(sn,null===(No=this._config.entities.individual1)||void 0===No?void 0:No.unit_of_measurement)}</span>`:""}</div><span class="label">${an}</span></div>`:R`<div class="spacer"></div>`}</div>`:R`<div class="spacer"></div>`} ${Lo&&this.showLine($n||0)?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-home-flow"><path id="solar" class="solar" d="M${Ho?55:53},0 v${zo?15:17} c0,${Ho?"30 10,30 30,30":"35 10,35 30,35"} h25" vector-effect="non-scaling-stroke"></path>${$n?H`<circle r="1" class="solar" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.solarToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#solar"></animateMotion></circle>`:""}</svg></div>`:""} ${Yo&&Lo&&this.showLine(En)?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-grid-flow"><path id="return" class="return" d="M${Ho?45:47},0 v15 c0,${Ho?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"></path>${En&&Lo?H`<circle r="1" class="return" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.solarToGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#return"></animateMotion></circle>`:""}</svg></div>`:""} ${Ho&&Lo&&this.showLine(kn||0)?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-battery-flow" class="flat-line"><path id="battery-solar" class="battery-solar" d="M50,0 V100" vector-effect="non-scaling-stroke"></path>${kn?H`<circle r="1" class="battery-solar" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.solarToBattery}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-solar"></animateMotion></circle>`:""}</svg></div>`:""} ${zo&&this.showLine(jn)?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="grid-home-flow" class="flat-line"><path class="grid" id="grid" d="M0,${Ho?50:Lo?56:53} H100" vector-effect="non-scaling-stroke"></path>${jn?H`<circle r="1" class="grid" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.gridToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#grid"></animateMotion></circle>`:""}</svg></div>`:null} ${Ho&&this.showLine(Sn)?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-home-flow"><path id="battery-home" class="battery-home" d="M55,100 v-${zo?15:17} c0,-30 10,-30 30,-30 h20" vector-effect="non-scaling-stroke"></path>${Sn?H`<circle r="1" class="battery-home" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.batteryToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-home"></animateMotion></circle>`:""}</svg></div>`:""} ${zo&&Ho&&this.showLine(Math.max(wn||0,xn||0))?R`<div class="lines ${Ht({high:Ho,"individual1-individual2":!Ho&&Uo&&Fo})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-grid-flow"><path id="battery-grid" class="${Ht({"battery-from-grid":Boolean(wn),"battery-to-grid":Boolean(xn)})}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"></path>${wn?H`<circle r="1" class="battery-from-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.batteryGrid}s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""} ${xn?H`<circle r="1" class="battery-to-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${Kn.batteryGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""}</svg></div>`:""}</div>${this._config.dashboard_link?R`<div class="card-actions"><a href="${this._config.dashboard_link}"><mwc-button>${this._config.dashboard_link_label||this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</mwc-button></a></div>`:""}</ha-card>`}updated(t){super.updated(t),this._config&&this.hass}};Jt.styles=Ft,t([st({attribute:!1})],Jt.prototype,"hass",void 0),t([lt()],Jt.prototype,"_config",void 0),t([lt()],Jt.prototype,"states",void 0),t([lt()],Jt.prototype,"entitiesArr",void 0),t([lt()],Jt.prototype,"error",void 0),Jt=t([(t=>i=>"function"==typeof i?((t,i)=>(customElements.define(t,i),i))(t,i):((t,i)=>{const{kind:e,elements:o}=i;return{kind:e,elements:o,finisher(i){customElements.define(t,i)}}})(t,i))("energy-flow-card-plus")],Jt);var Zt=Jt;export{Zt as default};
